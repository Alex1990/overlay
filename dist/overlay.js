/*!
 * overlay
 * http://alex1990.github.com/overlay
 */
!function(a){"use strict";function b(b){this.opts=b=a.extend({},e,b),this.eventPrefix="",this.$el=[],this.isClosed=!0,this.init(b)}var c=a(window),d=a(document),e=a.fn.overlayDefaults={name:"",closeOnClick:!0,parent:document.body,effect:"fade",openDuration:250,closeDuration:150,backgroundColor:"#000",opacity:.6,zIndex:100};b.prototype.init=function(b){this.opts=b=a.extend({},this.opts,b),this.eventPrefix=b.name+(b.name?".":"");var c=a(b.parent),d=a(b.parent).css("position");"auto"!==d&&"static"!==d||c.get(0)===document.body||c.css("position","relative"),this.$el=a('<div class="overlay'+(b.name?" "+b.name+"-overlay":"")+'"></div>'),this.$el.css({display:"none",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:b.backgroundColor,opacity:b.opacity,zIndex:b.zIndex}),this.$el.appendTo(b.parent),this.bindEvents()},b.prototype.bindEvents=function(){var b=this;c.on("resize",function(){b.$el.css({width:a(b.opts.parent).width(),height:a(b.opts.parent).height()})}),b.opts.closeOnClick&&b.$el.on("click",function(){b.close()}),d.on(this.eventPrefix+"overlay.open",function(){b.open()}),d.on(this.eventPrefix+"overlay.close",function(){b.close()})},b.prototype.open=function(){d.trigger(this.eventPrefix+"overlay.beforeopen"),b.openEffects[this.opts.effect].call(this,function(){this.isClosed=!1,d.trigger(this.eventPrefix+"overlay.afteropen")})},b.prototype.close=function(){d.trigger(this.eventPrefix+"overlay.beforeclose"),b.closeEffects[this.opts.effect].call(this,function(){this.isClosed=!0,d.trigger(this.eventPrefix+"overlay.afterclose")})},b.prototype.destroy=function(){this.$el.remove(),d.off(this.eventPrefix+"overlay.open"),d.off(this.eventPrefix+"overlay.close"),d.trigger(this.eventPrefix+"overlay.removed")},b.openEffects={none:function(a){this.$el.show(),a.call(this)},fade:function(b){this.$el.fadeIn(this.opts.openDuration,a.proxy(b,this))}},b.closeEffects={none:function(a){this.$el.hide(),a.call(this)},fade:function(b){this.$el.fadeOut(this.opts.closeDuration,a.proxy(b,this))}},window.Overlay=b}(jQuery||Zepto);