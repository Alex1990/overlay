/*!
 * overlay
 * http://alex1990.github.com/overlay
 */
!function(a,b){"use strict";function c(a){this.opts=a=b.extend({},f,a),this.eventPrefix="",this.$el=[],this.isClosed=!0,this.init(a)}var d=b(a),e=b(document),f=b.fn.overlayDefaults={backgroundColor:"#000",closeDuration:150,closeOnClick:!0,effect:"fade",name:"",opacity:.6,openDuration:250,parent:document.body,zIndex:100};c.prototype.init=function(a){this.opts=a=b.extend({},this.opts,a),this.eventPrefix=a.name+(a.name?".":"");var c=b(a.parent),d=b(a.parent).css("position");"auto"!==d&&"static"!==d||c.get(0)===document.body||c.css("position","relative"),this.$el=b('<div class="overlay'+(a.name?" "+a.name+"-overlay":"")+'"></div>'),this.$el.css({display:"none",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:a.backgroundColor,opacity:a.opacity,zIndex:a.zIndex}),this.$el.appendTo(a.parent),this.bindEvents()},c.prototype.bindEvents=function(){var a=this;d.on("resize",function(){a.$el.css({width:b(a.opts.parent).width(),height:b(a.opts.parent).height()})}),a.opts.closeOnClick&&a.$el.on("click",function(){a.close()}),e.on(this.eventPrefix+"overlay.open",function(){a.open()}),e.on(this.eventPrefix+"overlay.close",function(){a.close()})},c.prototype.open=function(){e.trigger(this.eventPrefix+"overlay.beforeopen"),c.openEffects[this.opts.effect].call(this,function(){this.isClosed=!1,e.trigger(this.eventPrefix+"overlay.afteropen")})},c.prototype.close=function(){e.trigger(this.eventPrefix+"overlay.beforeclose"),c.closeEffects[this.opts.effect].call(this,function(){this.isClosed=!0,e.trigger(this.eventPrefix+"overlay.afterclose")})},c.prototype.destroy=function(){this.$el.remove(),e.off(this.eventPrefix+"overlay.open"),e.off(this.eventPrefix+"overlay.close"),e.trigger(this.eventPrefix+"overlay.removed")},c.openEffects={none:function(a){this.$el.show(),a.call(this)},fade:function(a){this.$el.fadeIn(this.opts.openDuration,b.proxy(a,this))}},c.closeEffects={none:function(a){this.$el.hide(),a.call(this)},fade:function(a){this.$el.fadeOut(this.opts.closeDuration,b.proxy(a,this))}},a.Overlay=c}(window,jQuery||Zepto);