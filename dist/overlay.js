/*!
 * overlay
 * http://alex1990.github.com/overlay
 */
!function(a,b){"use strict";function c(a){a&&a.closeOnClick===!1&&(a.closeOnEvent=!1),this.opts=a=b.extend({},e,a),this.eventPrefix="",this.$el=[],this.isClosed=!0,this.init(a)}var d=b(document),e=b.fn.overlayDefaults={backgroundColor:"#000",closeDuration:150,closeOnEvent:"click",effect:"fade",name:"",opacity:.6,openDuration:250,parent:document.body,zIndex:100};c.prototype.init=function(a){this.opts=a=b.extend({},this.opts,a),this.eventPrefix=a.name+(a.name?".":"");var c=b(a.parent),d=b(a.parent).css("position");"auto"!==d&&"static"!==d||c.get(0)===document.body||c.css("position","relative"),this.$el=b('<div class="overlay'+(a.name?" "+a.name+"-overlay":"")+'"></div>'),this.$el.css({display:"none",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:a.backgroundColor,opacity:a.opacity,zIndex:a.zIndex}),this.$el.appendTo(a.parent),this.bindEvents()},c.prototype.bindEvents=function(){var a=this,b=a.opts.closeOnEvent;b&&a.$el.on(b,function(){console.log(1),a.close()}),d.on(this.eventPrefix+"overlay.open",function(){a.open()}),d.on(this.eventPrefix+"overlay.close",function(){a.close()})},c.prototype.open=function(){d.trigger(this.eventPrefix+"overlay.beforeopen"),c.openEffects[this.opts.effect].call(this,function(){this.isClosed=!1,d.trigger(this.eventPrefix+"overlay.afteropen")})},c.prototype.close=function(){d.trigger(this.eventPrefix+"overlay.beforeclose"),c.closeEffects[this.opts.effect].call(this,function(){this.isClosed=!0,d.trigger(this.eventPrefix+"overlay.afterclose")})},c.prototype.destroy=function(){this.$el.remove(),d.off(this.eventPrefix+"overlay.open"),d.off(this.eventPrefix+"overlay.close"),d.trigger(this.eventPrefix+"overlay.removed")},c.openEffects={none:function(a){this.$el.show(),a.call(this)},fade:function(a){var b=this;b.$el.css({display:"block",opacity:0}).animate({opacity:b.opts.opacity},this.opts.openDuration,function(){a.call(b)})}},c.closeEffects={none:function(a){this.$el.hide(),a.call(this)},fade:function(a){var c=this;c.$el.animate({opacity:0},this.opts.closeDuration,function(){b(this).hide(),a.call(c)})}},a.Overlay=c}(window,this.jQuery||this.Zepto);